<!DOCTYPE HTML>
<html lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
    <title>slideToggle</title>
    <link rel="stylesheet" href="css/main.css" type="text/css">
    <style type="text/css">    
    #div1{width: 200px;height: 200px;background: red;position: absolute;left: 600px;top: 50px;}
    #div2{width: 1px;height: 200px;position: absolute;left: 300px;top: 0;background: #000;}
    </style>
</head>
<body id="body">
   
<input type="button" value="开始" id="go">

<div id="list" style="height:20px;overflow:hidden;">
  <ul>
    <li>3232</li>
    <li>2222</li>
    <li>2222</li>
    <li>2222</li>
    <li>2222</li>
    <li>2222</li>
    <li>2222</li>
    <li>2222</li>
    <li>2222</li>
    <li>2222</li>
  </ul>
</div>

</body>
    <script src="js/jquery/jquery-1.10.2.min.js"></script>
    
    <script>

    jQuery.fn.animateAuto = function(prop, speed, callback){
    var elem, height, width;
    return this.each(function(i, el){
        el = jQuery(el), elem = el.clone().css({"height":"auto","width":"auto"}).appendTo("body");
        height = elem.css("height"),
        width = elem.css("width"),
        elem.remove();
        
        if(prop === "height")
            el.animate({"height":height}, speed, callback);
        else if(prop === "width")
            el.animate({"width":width}, speed, callback);  
        else if(prop === "both")
            el.animate({"width":width,"height":height}, speed, callback);
    });  
 }

      $(function(){

          $("#go").on("click",function(){

            $("#list").animateAuto("height","auto");

          });

      });

    </script>
</html>
